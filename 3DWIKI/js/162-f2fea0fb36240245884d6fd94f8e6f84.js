(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{"1Edz":function(t,e,o){"use strict";var i=o("TSHB"),n=o("Vfgr"),s=o("89mf");e.a={name:"WithEventCompose",constructor:function(){var t=this;this.events=Object(i.a)(this.events,function(e){return"string"!=typeof e?e:e.split("|>").map(n.a).reduce(function(e,o){if(!t[o])throw new Error("WithEventCompose error: method '".concat(o,"' do not exist on view '").concat(t.displayName,"'."));return Object(s.b)(t[o].bind(t),e)},s.c)})}}},F9Iv:function(t,e,o){"use strict";for(var i=o("EVdn"),n=o.n(i),s=function(t){return'<a title="'+t.title+" ("+t.shortcut+')" data-action="'+t.action+'" tabindex="-1" class="fa '+t.icon+'"></a>'},a={bold:"**",code:"```",italic:"*",quote:"> ","unordered-list":"* ","ordered-list":"1. "},r=["[","](#url#)"],l=["![","](#url#)"],h=/Mac/.test(navigator.platform),d=[].concat([{action:"toggleBold",shortcut:"Cmd-B",title:"Bold",icon:"fa-bold"},{action:"toggleItalic",shortcut:"Cmd-I",title:"Italic",icon:"fa-italic"},{action:"drawLink",shortcut:"Cmd-K",title:"Link",icon:"fa-link"},{action:"toggleHeading",shortcut:"Cmd-H",title:"Heading",icon:"fa-header"},{action:"drawImage",shortcut:"Cmd-Alt-I",title:"Insert Image",icon:"fa-picture-o"},{action:"toggleBlockquote",shortcut:"Cmd-'",title:"Quote",icon:"fa-quote-left"},{action:"toggleOrderedList",shortcut:"Cmd-Alt-L",title:"Numbered List",icon:"fa-list-ol"},{action:"toggleUnorderedList",shortcut:"Cmd-L",title:"Generic List",icon:"fa-list-ul"}]),c=function(t){return h?t.replace("Ctrl","Cmd"):t.replace("Cmd","Ctrl")},p="",u={},g={initializeToolbar:function(t){var e=(new DOMParser).parseFromString(function(t){return'<div class="editor-toolbar">'+t+"</div>"}(p),"text/html").body.firstChild;return n()(e).on("mousedown","[data-action]",function(t){t.stopImmediatePropagation(),t.preventDefault(),this[t.currentTarget.getAttribute("data-action")]()}.bind(this)),n()(t.container).prepend(e),e},getEditor:function(){return this.__editorInstance},setEditor:function(t){this.__editorInstance=t},getShortcuts:function(){return u},getMarkdownEditorValue:function(){var t=this.getEditor();return t?t.getValue():""},toggleBold:function(){this._toggleBlock("bold",a.bold)},toggleItalic:function(){this._toggleBlock("italic",a.italic)},toggleHeading:function(){this._toggleHeading()},toggleBlockquote:function(){this._toggleLine("quote")},toggleOrderedList:function(){this._toggleLine("ordered-list")},toggleUnorderedList:function(){this._toggleLine("unordered-list")},drawLink:function(){var t=this._getCodemirrorState();this._replaceSelection(t.link,r,"http://")},drawImage:function(){var t=this._getCodemirrorState();this._replaceSelection(t.image,l,"http://")},_getCodemirrorState:function(t){var e=this.getEditor();t=t||e.getCursor("start");var o=e.getTokenAt(t);if(!o.type)return{};for(var i,n,s=o.type.split(" "),a={},r=0;r<s.length;r++)"strong"===(i=s[r])?a.bold=!0:"variable-2"===i?(n=e.getLine(t.line),/^\s*\d+\.\s/.test(n)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===i?a.quote=!0:"em"===i?a.italic=!0:"quote"===i?a.quote=!0:"strikethrough"===i?a.strikethrough=!0:"comment"===i?a.code=!0:"link"===i?a.link=!0:"tag"===i?a.image=!0:i.match(/^header(\-[1-6])?$/)&&(a[i.replace("header","heading")]=!0);return a},_toggleBlock:function(t,e,o){if(!/editor-preview-active/.test(this.getEditor().getWrapperElement().lastChild.className)){o=void 0===o?e:o;var i,n=this.getEditor(),s=this._getCodemirrorState(),a=e,r=o,l=n.getCursor("start"),h=n.getCursor("end");s[t]?(a=(i=n.getLine(l.line)).slice(0,l.ch),r=i.slice(l.ch),"bold"===t?(a=a.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),r=r.replace(/(\*\*|__)/,"")):"italic"===t?(a=a.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),r=r.replace(/(\*|_)/,"")):"strikethrough"===t&&(a=a.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),r=r.replace(/(\*\*|~~)/,"")),n.replaceRange(a+r,{line:l.line,ch:0},{line:l.line,ch:99999999999999}),"bold"===t||"strikethrough"===t?(l.ch-=2,l!==h&&(h.ch-=2)):"italic"===t&&(l.ch-=1,l!==h&&(h.ch-=1))):(i=n.getSelection(),"bold"===t?i=(i=i.split("**").join("")).split("__").join(""):"italic"===t?i=(i=i.split("*").join("")).split("_").join(""):"strikethrough"===t&&(i=i.split("~~").join("")),n.replaceSelection(a+i+r),l.ch+=e.length,h.ch=l.ch+i.length),n.setSelection(l,h),n.focus()}},_toggleHeading:function(){var t=this.getEditor();if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var e=t.getCursor("start"),o=t.getCursor("end"),i=e.line;i<=o.line;i++)!function(e){var o=t.getLine(e),i=o.search(/[^#]/);o=i<=0?"# "+o:6===i?o.substr(7):"#"+o,t.replaceRange(o,{line:e,ch:0},{line:e,ch:99999999999999})}(i);t.focus()}},_toggleLine:function(t){var e=this.getEditor();if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var o=this._getCodemirrorState(),i=e.getCursor("start"),n=e.getCursor("end"),s={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},r=i.line;r<=n.line;r++)!function(i){var n=e.getLine(i);n=o[t]?n.replace(s[t],"$1"):a[t]+n,e.replaceRange(n,{line:i,ch:0},{line:i,ch:99999999999999})}(r);e.focus()}},_replaceSelection:function(t,e,o){var i=this.getEditor();if(!/editor-preview-active/.test(i.getWrapperElement().lastChild.className)){var n,s=e[0],a=e[1],r=i.getCursor("start"),l=i.getCursor("end");o&&(a=a.replace("#url#",o)),t?(s=(n=i.getLine(r.line)).slice(0,r.ch),a=n.slice(r.ch),i.replaceRange(s+a,{line:r.line,ch:0})):(n=i.getSelection(),i.replaceSelection(s+n+a),r.ch+=s.length,r!==l&&(l.ch+=s.length)),i.setSelection(r,l),i.focus()}},_tabAndIndentMarkdownList:function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentMore");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var o=Array(t.options.tabSize+1).join(" ");t.replaceSelection(o)}},_shiftTabAndUnindentMarkdownList:function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentLess");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var o=Array(t.options.tabSize+1).join(" ");t.replaceSelection(o)}}},v=0;v<d.length;v++)d[v].action&&g[d[v].action]&&(p+=s(d[v]),u[c(d[v].shortcut)]=function(t){return g[t.action]()}.bind(g,d[v]));u.Enter="newlineAndIndentContinueMarkdownList",u.Tab=g._tabAndIndentMarkdownList.bind(g),u["Shift-Tab"]=g._shiftTabAndUnindentMarkdownList.bind(g),e.a=g},v187:function(t,e,o){"use strict";o.r(e);var i=o("i4v/"),n=o("Vfgr"),s=o("syB0"),a=o("vBtE"),r=o("gCTM"),l=o("gBaA"),h=o("O67m"),d=o("wQEo"),c=o("f5KD"),p=(o("QF8f"),a.a.extend({mixins:[d.a,h.a],optionTypes:{viewerModel:c.b.model.isRequired,hotspots:c.b.collection.isRequired,hotspotIndex:c.b.number.isRequired,viewer:c.b.object.isRequired,editMode:c.b.bool},urlize:r.default.getFromString('{{ content | striptags | urlize(target="_blank") | paragraphy }}'),events:{"click .submit":"inputTitleDescription","change .description":"changeDescription","keydown textarea":"handleTextareaKeys","keydown .title":"handleTitleKeys","click .activate-render":"showRenderedContent","mouseover .activate-render":"renderMarkdown","click .activate-edition":"showEditingContent"},el:function(){return r.default.getFromMacro(["skfb_front/macros/model","model_hotspot"],[this.options])},initialize:function(){a.a.prototype.initialize.apply(this,arguments),this.initializeMarkdown({input:this.$(".edition textarea"),target:this.$(".markdown-rendered-content")}),this.useTopLeft(),this.link()},delegateEvents:function(){a.a.prototype.delegateEvents.apply(this,arguments),this.options.hotspots.on("add remove reset sort",this.link,this)},undelegateEvents:function(){a.a.prototype.undelegateEvents.apply(this,arguments),this.options.hotspots.off("add remove reset sort",this.link,this)},link:function(){this.model&&this.model.off("change",this.render,this),this.model=this.options.model=this.options.hotspots.at(this.options.hotspotIndex),this.model&&this.model.on("change",this.render,this),this.render()},render:function(){if(this.model){var t=function(t){return t!==document.activeElement},e=this.model.get("name"),o=this.model.get("content");this.$(".edition .title").filter(t).text(e).val(e),this.$(".edition .description").filter(t).text(o.raw).val(o.raw),this.$(".title").filter(t).html(this.urlize({content:e}));var i=""!==Object(n.a)(o.rendered);this.$(".more").toggle(i),this.$(".description").filter(t).html(o.rendered),this.options.viewer.scene.getFeatures().webVR.getModel().get("enable")||this.handleLazyLoading(),this.$(".description")[0]!==document.activeElement&&(this.options.editMode||this.$(".tooltip").toggleClass("no-description",!o.raw))}},showEditingContent:function(){this.$(".meta .selected").removeClass("selected"),this.$(".meta .activate-edition").addClass("selected"),this.$(".render").hide(),this.$(".edition").show()},showRenderedContent:function(){this.renderMarkdown();var t=this.$(".edition .title").val();this.$(".render .title").text(t),this.$(".render").show(),this.$(".edition").hide(),this.$(".meta .selected").removeClass("selected"),this.$(".meta .activate-render").addClass("selected"),this.handleLazyLoading()},inputTitleDescription:function(t){this.$(".edition .title").val()&&(this.renderMarkdown().then(function(t){this.model.set({name:this.$(".edition .title").val(),content:{raw:this.$(".edition .description").val(),rendered:t}})}.bind(this)),this.options.viewer.blurHotspots(),t.stopPropagation(),l.a.annotationEditorTooltipEdited(this.options.viewerModel.get("uid")))},handleTitleKeys:function(t){13===t.keyCode&&this.$(".submit").click()},handleTextareaKeys:function(t){this.unsetMarkdownReady(),13===t.keyCode&&(t.metaKey||t.ctrlKey)&&this.$(".submit").click()},changeDescription:function(){this.options.editMode||this.$(".tooltip").toggleClass("no-description",!this.model.get("description"))},showTooltip:function(){if(this.$el.addClass("selected"),this.$(".tooltip").addClass("visible"),this.updateTooltipDirection(),this.options.editMode){var t=function(){this.x&&this.y&&this.$(".edition .title").focus()}.bind(this);Object(s.a)(function(){this.tooltipInViewport()?t():setTimeout(t,1200)}.bind(this))}},hideTooltip:function(){this.$el.removeClass("selected"),this.$(".tooltip").removeClass("visible")},updateTooltipDirection:function(){var t=this.el.parentNode.parentNode,e=this.el.querySelector(".tooltip");if(t&&e&&e.classList.contains("visible")){e.classList.remove("reverse-x"),e.classList.remove("reverse-y");var o=e.getBoundingClientRect().left,i=e.getBoundingClientRect().top,n=t.getBoundingClientRect(),s=e.getBoundingClientRect();e.classList.toggle("reverse-x",o+s.width+10>=n.width),e.classList.toggle("reverse-y",i+s.height+10>=n.height)}},setCoordinates:function(t,e){this.x=t,this.y=e},tooltipInViewport:function(){var t=this.$el.closest(".webgl")[0].getBoundingClientRect(),e=this.$(".tooltip")[0].getBoundingClientRect(),o=e.left-t.left>0&&e.left+e.width<t.left+t.width,i=e.top-t.top>0&&e.top+e.height<t.top+t.height;return o&&i},useTranslate:function(){if("translate"!==this.mode&&(this.mode="translate",this.el.parentNode.getBoundingClientRect)){var t=this.el.parentNode.getBoundingClientRect(),e=this.el.getBoundingClientRect(),o=e.left-t.left+e.width/2,i=e.top-t.top+e.height/2;this.$el.css("transform","translate3d("+o+"px,"+i+"px, 0)"),this.$el.css("left","0"),this.$el.css("top","0")}},useTopLeft:function(){if("topleft"!==this.mode&&(this.mode="topleft",this.el.parentNode.getBoundingClientRect)){var t=this.el.parentNode.getBoundingClientRect(),e=this.el.getBoundingClientRect(),o=e.left-t.left+e.width/2,i=e.top-t.top+e.height/2;this.$el.css("transform","none"),this.$el.css("left",o),this.$el.css("top",i)}},setPosition:function(){switch(this.mode){case"translate":this.$el.css("transform","translate3d("+this.x+"px,"+this.y+"px, 0)");break;case"topleft":this.el.style.left=this.x+"px",this.el.style.top=this.y+"px"}},preparePositionFix:function(){var t=this.transformFixTimer=window.requestAnimationFrame(function(){this.transformFixTimer===t&&(this.useTopLeft(),this.setPosition(Math.round(this.x),Math.round(this.y)))}.bind(this))}})),u=o("fgaA"),g=o("12sq"),v=o("JJ+t"),f=(o("g+9p"),o("xvcl")),m=o("kUJ5"),w=o("Auie"),C=o("1Edz"),b=o("FPmW"),_=g.a.shortcuts;e.default=i.a.extend({tplList:r.default.getFromMacro("skfb_front/macros/viewer","hotspots_list"),_hotspotCycleInterval:null,hotspotViews:[],mixins:[C.a,Object(b.a)(".js-scrollable")],events:{'mousedown [data-action="prev-annotation"]':"stopEvent |> prevHotspot",'mousedown [data-action="next-annotation"]':"stopEvent |> nextHotspot",'touchend [data-action="prev-annotation"]':"stopEvent |> prevHotspot",'touchend [data-action="next-annotation"]':"stopEvent |> nextHotspot",'click [data-action="next-annotation"]':"stopEvent",'click [data-action="prev-annotation"]':"stopEvent",'mousedown [data-action="toggle-autopilot"]':"stopEvent |> toggleAutopilot",'touchend [data-action="toggle-autopilot"]':"stopEvent |> toggleAutopilot",'mousedown [data-action="toggle-visibility"]':"stopEvent |> toggleVisibility",'touchend [data-action="toggle-visibility"]':"stopEvent |> toggleVisibility",'mousedown [data-action="toggle-annotation-list"]':"stopEvent |> toggleAnnotationList",'touchend [data-action="toggle-annotation-list"]':"stopEvent |> toggleAnnotationList","touchstart [data-hotspot-target]":"menuTriggerHotspot","click [data-hotspot-target]":"menuTriggerHotspot","mouseover .control-hotspots .label":"revealHotspots","mouseout .control-hotspots .label":"unrevealHotspots","click .more":"showFullscreenTooltip","mousedown .webgl":"trackMousedownTiming"},initialize:function(){i.a.prototype.initialize.apply(this,arguments),this.initialValue=this.$(".hotspot-name").text(),this.initializeShortcuts(),this.previousHotspot=-1,this.currentHotspot=-1,this._hotspots=this.model.get("hotspots"),0===this._hotspots.length&&this.hideAnnotationControls()},initializeShortcuts:function(){this.annotationControlShortcuts=new v.a(_.annotationControl),this.annotationControlShortcuts.on("prevAnnotation",this.prevHotspot.bind(this)),this.annotationControlShortcuts.on("nextAnnotation",this.nextHotspot.bind(this)),this.annotationControlShortcuts.listen()},delegateEvents:function(){i.a.prototype.delegateEvents.apply(this,arguments),this.model.on("change:visible",this.displayAnnotations,this)},undelegateEvents:function(){i.a.prototype.undelegateEvents.apply(this,arguments),this.model.off("change:visible",this.displayAnnotations,this)},stopEvent:function(t){t.preventDefault(),t.stopPropagation()},trackMousedownTiming:function(t){this._mouseDownTime=Date.now(),this._mouseDownPosition=t.pageX},renderControl:function(t){var e=this.$(".hotspot-name");t?(e.text(t.get("name")),e.removeClass("default")):(e.text(this.initialValue),e.addClass("default"))},isVr:function(){return this.viewer.isVR()},toggleAnnotationList:function(t){this.$(".hotspots-list").toggleClass("visible",t)},toggleAutopilot:function(){var t=this.$('[data-action="toggle-autopilot"]').hasClass("--stopped");this.triggerHotspotCycle(t)},toggleVisibility:function(){var t=this.model.get("visible");this.toggleAnnotations(!t),l.a.modelViewerAnnotationsToggled(this.viewer._currentModel.get("uid"),!t)},updateHotspotsControls:function(){var t=this.tplList([this._hotspots.toJSON()]);if(this.viewer.$(".hotspot-controls .list").html(t),this._hotspots.length>0&&!this.isVr()){this.showAnnotationControls();var e=!0===this.viewer.proxySettings.get("annotationsVisible");this.toggleAnnotations(e)}else this.hideAnnotationControls(),f.a&&!Object(u.a)().isApp&&this.toggleAnnotations(!1);this.displayAnnotations(null,this.model.get("visible"))},showFullscreenTooltip:function(t){t.preventDefault(),t.stopPropagation();var e=this._hotspots.at(this.currentHotspot);e&&(this.viewer.subviews.hotspotsOverlay.setModel(e),this.viewer.subviews.hotspotsOverlay.show())},showAnnotations:function(){this.toggleAnnotations(!0)},hideAnnotations:function(){this.toggleAnnotations(!1)},toggleAnnotations:function(t){this.model.get("visible")!==t&&this.model.set("visible",t)},displayAnnotations:function(t,e){this.$('[data-action="toggle-visibility"]').toggleClass("--hide",e),this.viewer.$el.toggleClass("annotations-enabled",e)},showAnnotationControls:function(){this.viewer.$el.addClass("has-hotspots")},hideAnnotationControls:function(){this.viewer.$el.removeClass("has-hotspots")},hideTooltips:function(){this.hotspotViews.forEach(function(t){t.hideTooltip()})},createHotspotView:function(t){var e=!(!this.viewer.scene||!this.viewer.scene.getOptions().widgetAPI),o=new p({viewerModel:this.viewer._currentModel,hotspots:this._hotspots,hotspotIndex:t,viewer:this.viewer,editMode:!!e});return o.$el.appendTo(this.options.container),o},refreshHotspots:function(){var t,e,o=this._hotspots.length;for(t=o,e=this.hotspotViews.length;t<e;++t)this.hotspotViews.pop().remove();for(t=this.hotspotViews.length,e=o;t<e;++t)this.hotspotViews.push(this.createHotspotView(t));this.updatePositionCurrentHotspot(),!this._initCanvasHotspot&&this.isVr()&&(this._initCanvasHotspot=!0,this._hotspots.trigger("inserted"))},updatePositionCurrentHotspot:function(){if(-1!==this.currentHotspot){var t=this.hotspotViews[this.currentHotspot],e=this._hotspots.at(this.currentHotspot);e||(this.currentHotspot=-1);var o=[0,0,0];w.a.getScreenPositionFromWorldPoint(e.get("lastComputedWorldPosition"),o),m.a.glCoordToCanvas(o[0],o[1],o),t.setCoordinates(o[0],o[1]),t.preparePositionFix(),t.useTranslate(),t.setPosition(),t.updateTooltipDirection()}},menuTriggerHotspot:function(t){this.viewer.proxySettings.set("annotationsVisible",!0);var e=parseInt(t.currentTarget.getAttribute("data-hotspot-target"),10);this._hotspots.trigger("select",this._hotspots.at(e)),l.a.modelViewerAnnotationListClicked(this.viewer._currentModel.get("uid")),t.stopPropagation()},onHotspotSelected:function(t){var e=this._hotspots.indexOf(t);this.currentHotspot!==e&&(this.previousHotspot=this.currentHotspot,this.currentHotspot=e,this.applyCurrentHotspot(),this.updatePositionCurrentHotspot())},emitHotspotFocus:function(t){this.viewer.scene.trigger("annotationFocus",t),this.hotspotFocus=t},emitHotspotBlur:function(t){this.viewer.scene.trigger("annotationBlur",t),this.hotspotFocus=void 0},applyCurrentHotspot:function(){if(this.hotspotViews.forEach(function(t){t.hideTooltip()}),void 0!==this.hotspotFocusTimeoutID&&(window.clearTimeout(this.hotspotFocusTimeoutID),window.clearTimeout(this.hotspotFocusTooltipTimeoutID),this.hotspotFocusTimeoutID=void 0,this.hotspotFocusTooltipTimeoutID=void 0),void 0!==this.hotspotFocus&&this.emitHotspotBlur(this.hotspotFocus),-1!==this.currentHotspot){var t=this._hotspots.at(this.currentHotspot),e=this.hotspotViews[this.currentHotspot],o=this.currentHotspot,i=Math.floor(1500);this.hotspotFocusTimeoutID=window.setTimeout(function(){this.hotspotFocusTimeoutID=void 0,this.emitHotspotFocus(o)}.bind(this),i),e.showTooltip(),this.renderControl(t),this.$(".hotspots-list a").removeClass("active"),this.$('.hotspots-list a[data-hotspot-target="'+this.currentHotspot+'"]').addClass("active")}else this.renderControl(this._hotspots.at(this.previousHotspot))},paginateHotspot:function(t){var e;t=parseInt(t,10);var o=-1===this.currentHotspot?-1===this.previousHotspot?-1:this.previousHotspot:this.currentHotspot;e=-1===o?0:t>0?(o+t)%this._hotspots.length:o+t>=0?o+t:o+t+this._hotspots.length,this._hotspots.trigger("select",this._hotspots.at(e))},nextHotspot:function(){l.a.modelViewerNextAnnotationClicked(this.viewer._currentModel.get("uid")),null!==this._hotspotCycleInterval&&this.triggerHotspotCycle(!1),this.paginateHotspot(1)},beginHotspotCycleInterval:function(t){if(null===this._hotspotCycleInterval){this._hotspotCycleIntervalPaused||this.paginateHotspot(0),window.clearTimeout(this._hotspotPausedCycleTimeout);var e=function(){window.clearInterval(this._hotspotCycleInterval),this._hotspotCycleInterval=window.setInterval(function(){this.paginateHotspot(1)}.bind(this),Object(u.a)().annotationCycleDuration)}.bind(this);t?this._hotspotPausedCycleTimeout=setTimeout(e,t):e()}},pauseHotspotCycleInterval:function(t){var e=!!this._hotspotCycleInterval||this._hotspotCycleIntervalPaused;this.stopHotspotCycleInterval(),e&&t&&(this._hotspotPausedCycleTimeout=setTimeout(this.beginHotspotCycleInterval.bind(this),t)),this._hotspotCycleIntervalPaused=e},stopHotspotCycleInterval:function(){window.clearInterval(this._hotspotCycleInterval),this._hotspotCycleInterval=null,this._hotspotCyclePaused=!1,this._hotspotCycleIntervalPaused=!1,this._hotspotPausedCycleTimeout&&window.clearTimeout(this._hotspotPausedCycleTimeout)},triggerHotspotCycle:function(t){l.a.modelViewerAnnotationsCycleToggled(this.viewer._currentModel.get("uid"),t),this.$('[data-action="toggle-autopilot"]').toggleClass("--stopped",!t),t?(this.beginHotspotCycleInterval(),this.$(".hotspots-list").removeClass("visible")):this.stopHotspotCycleInterval()},prevHotspot:function(){l.a.modelViewerPreviousAnnotationClicked(this.viewer._currentModel.get("uid")),null!==this._hotspotCycleInterval&&this.triggerHotspotCycle(!1),this.paginateHotspot(-1)},revealHotspots:function(){this.viewer.$el.addClass("annotations-peak")},unrevealHotspots:function(){this.viewer.$el.removeClass("annotations-peak")}})},wQEo:function(t,e,o){"use strict";(function(t){var i=o("J4zp"),n=o.n(i),s=o("YfG3"),a=o("IzLi"),r=o("EVdn"),l=o.n(r),h=o("F9Iv"),d=o("eEbW");e.a={name:"Markdown",dependencies:["LazyLoading"],initializeMarkdown:function(t){this.options.markdown=Object(s.a)({},this.options.markdown,t),this.__markdown={ready:!1,loading:!1,promise:null,shortcuts:{}},this.options.markdown.editor&&this.initializeEditor()},initializeEditor:function(){var e=this,i=l()(this.options.markdown.input),s=Object(a.a)(this.options.markdown.editor)?this.options.markdown.editor:{};i.addClass("loading-editor"),t.all([o.e(40).then(o.t.bind(null,"VrN/",7)),o.e(40).then(o.t.bind(null,"RKCW",7)),o.e(40).then(o.t.bind(null,"HvfG",7))]).then(function(t){var o=n()(t,1)[0].fromTextArea(i[0],{mode:"gfm",theme:"neo",highlightFormatting:!0,lineWrapping:!0,extraKeys:h.a.getShortcuts()});h.a.setEditor(o),h.a.initializeToolbar(s),s.container&&l()(s.container).addClass("wysiwyg"),i.removeClass("loading-editor"),o.on("beforeChange",function(t,o){e.getMarkdownEditorValue().length+o.text[0].length>parseInt(l()(t.getTextArea()).attr("maxlength"),10)&&"+delete"!==o.origin&&o.cancel()}),o.on("change",function(t){var e=l()(t.getTextArea());e.val(t.getValue()),e.trigger("input")})})},renderMarkdown:function(){var e=this;return this.__markdown.ready?t.resolve(this.options.markdown.target[0].innerHTML):this.__markdown.loading?this.__markdown.promise:(this.__markdown.loading=!0,this.__markdown.promise=new t(function(t){var o=e.getMarkdownEditorValue();o?(e.unsetMarkdownReady(),d.b.getMarkdownPreview(o).then(function(e){this.setMarkdownReady(e.result),this.handleLazyLoading(),t(e.result)}.bind(e),function(){this.setMarkdownReady("Failed to load preview"),t("")}.bind(e))):(e.setMarkdownReady(""),t(""))}),this.__markdown.promise)},setMarkdownReady:function(t){this.__markdown.ready=!0,this.__markdown.loading=!1,this.options.markdown.target.html(l()("<div></div>").append(t))},unsetMarkdownReady:function(){this.__markdown.ready=!1,this.options.markdown.target.html(l()("<div>Loading preview...</div>"))},getMarkdownEditorValue:function(){return h.a.getMarkdownEditorValue()||this.options.markdown.input?l()(this.options.markdown.input).val():""}}}).call(this,o("CSL1"))}}]);
//# sourceMappingURL=162-f2fea0fb36240245884d6fd94f8e6f84.js.map